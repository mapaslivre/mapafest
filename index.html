<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gincana MapaFest 2025 - RegiÃµes HistÃ³ricas</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f4f6f8; }
  h1 { text-align: center; color: #2a9d8f; }
  input, button, select { padding: 8px; margin: 5px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; background: #fff; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  th { background: #2a9d8f; color: #fff; }
  .grupoA { background: #f1f8e9; }
  .grupoB { background: #e3f2fd; }
  .grupoC { background: #fff3e0; }
  .grupoD { background: #fce4ec; }
  .msg { font-weight: bold; color: #1565c0; margin-top: 10px; }
  .csv-btn { background: #1565c0; color: #fff; border: none; padding: 8px 12px; cursor: pointer; border-radius: 6px; }
  .csv-btn:hover { background: #0d47a1; }
  .ranking-geral { background: #fff; border-radius: 8px; padding: 10px; margin-bottom: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  .ranking-geral h2 { text-align: center; color: #264653; }
  .posicao { font-weight: bold; font-size: 18px; margin: 5px 0; }
  .primeiro { color: gold; }
  .segundo { color: silver; }
  .terceiro { color: #cd7f32; }
  .lema { font-size: 13px; color: #555; font-style: italic; margin-top: -6px; }
</style>
</head>
<body>

<h1>ğŸ† Gincana MapaFest 2025 - RegiÃµes HistÃ³ricas</h1>
<p style="text-align:center;">Mapeando o Brasil pelas suas origens â€” cada ponto, uma histÃ³ria.</p>

<!-- Ranking geral -->
<div class="ranking-geral">
  <h2>ğŸ Ranking Geral dos Grupos</h2>
  <div id="rankingGeral"></div>
</div>

<!-- Tarefas -->
<h3>ğŸ—ºï¸ Tarefas disponÃ­veis:</h3>
<ul id="listaTarefas">
  <li>1ï¸âƒ£ Mapear ruas do bairro central</li>
  <li>2ï¸âƒ£ Adicionar nomes de edifÃ­cios histÃ³ricos</li>
  <li>3ï¸âƒ£ Mapear praÃ§as e Ã¡reas verdes</li>
  <li>4ï¸âƒ£ Corrigir nomes duplicados de ruas</li>
  <li>5ï¸âƒ£ Adicionar ciclovias e pistas de caminhada</li>
  <li>6ï¸âƒ£ Mapeamento livre em qualquer lugar do Brasil</li>
  <li>7ï¸âƒ£ Mapear 5 edificaÃ§Ãµes em um bairro</li>
  <li>8ï¸âƒ£ Mapear Ã¡rvores em qualquer lugar do Brasil</li>
  <li>9ï¸âƒ£ Mapear uma Ã¡rea verde no limite da AmazÃ´nia Legal</li>
</ul>

<!-- Registrar atividade -->
<h3>ğŸš© Registrar atividade:</h3>
<input type="text" id="nomeParticipante" placeholder="Nome do participante">
<select id="grupoSelect">
  <option value="">Selecione o grupo</option>
  <option value="A">ğŸ—ºï¸ Capitanias</option>
  <option value="B">ğŸï¸ SertÃµes</option>
  <option value="C">â›ª MissÃµes</option>
  <option value="D">âœŠğŸ¿ Quilombos</option>
</select>
<input type="number" id="atividade" min="1" max="9" placeholder="NÂº da tarefa">
<button onclick="registrarAtividade()">Registrar</button>
<div id="mensagem" class="msg"></div>

<!-- Tabela de ranking -->
<h3>ğŸ“Š Detalhamento dos Grupos e Participantes</h3>
<table id="rankingTable">
  <thead>
    <tr>
      <th>Grupo</th>
      <th>Participante</th>
      <th>Atividade</th>
      <th>Pontos</th>
      <th>Confirmar</th>
      <th>Total do Grupo</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<button class="csv-btn" onclick="baixarCSV()">â¬‡ï¸ Baixar Ranking em CSV</button>

<script>
const grupos = {
  A: { nome: "ğŸ—ºï¸ Capitanias", lema: "De onde tudo comeÃ§ou.", total: 0, cor: "grupoA", participantes: [] },
  B: { nome: "ğŸï¸ SertÃµes", lema: "Explorando caminhos e descobertas.", total: 0, cor: "grupoB", participantes: [] },
  C: { nome: "â›ª MissÃµes", lema: "Mapeando pela uniÃ£o dos povos.", total: 0, cor: "grupoC", participantes: [] },
  D: { nome: "âœŠğŸ¿ Quilombos", lema: "Mapeando com coragem e liberdade.", total: 0, cor: "grupoD", participantes: [] }
};

const tarefas = {
  1: "Mapear ruas do bairro central",
  2: "Adicionar nomes de edifÃ­cios histÃ³ricos",
  3: "Mapear praÃ§as e Ã¡reas verdes",
  4: "Corrigir nomes duplicados de ruas",
  5: "Adicionar ciclovias e pistas de caminhada",
  6: "Mapeamento livre em qualquer lugar do Brasil",
  7: "Mapear 5 edificaÃ§Ãµes em um bairro",
  8: "Mapear Ã¡rvores em qualquer lugar do Brasil",
  9: "Mapear uma Ã¡rea verde no limite da AmazÃ´nia Legal"
};

function registrarAtividade() {
  const nome = document.getElementById('nomeParticipante').value.trim();
  const grupoId = document.getElementById('grupoSelect').value;
  const atividadeNum = document.getElementById('atividade').value;
  const msg = document.getElementById('mensagem');

  msg.textContent = "";

  if (!nome || !grupoId || !atividadeNum) {
    msg.textContent = "âš ï¸ Preencha todas as informaÃ§Ãµes!";
    return;
  }

  const grupo = grupos[grupoId];
  let participante = grupo.participantes.find(p => p.nome === nome);
  if (!participante) {
    participante = { nome, atividades: [], pontos: 0 };
    grupo.participantes.push(participante);
  }

  participante.atividades.push({ nome: tarefas[atividadeNum], concluido: false });
  msg.textContent = `ğŸ“ ${nome} iniciou a tarefa "${tarefas[atividadeNum]}" (${grupo.nome})`;
  atualizarTabelas();
}

function confirmarTarefa(gId, nomeParticipante, indexAtividade) {
  const grupo = grupos[gId];
  const participante = grupo.participantes.find(p => p.nome === nomeParticipante);
  const atividade = participante.atividades[indexAtividade];

  if (atividade.concluido) return;

  atividade.concluido = true;
  participante.pontos += 1;
  grupo.total += 1;

  document.getElementById('mensagem').textContent = `âœ… ${nomeParticipante} concluiu "${atividade.nome}" (${grupo.nome})!`;
  atualizarTabelas();
}

function atualizarTabelas() {
  const tbody = document.getElementById('rankingTable').getElementsByTagName('tbody')[0];
  tbody.innerHTML = "";

  Object.keys(grupos).forEach(gId => {
    const g = grupos[gId];
    g.participantes.forEach(p => {
      p.atividades.forEach((a, i) => {
        const row = tbody.insertRow();
        row.className = g.cor;
        row.insertCell(0).innerHTML = `${g.nome}<div class='lema'>${g.lema}</div>`;
        row.insertCell(1).innerText = p.nome;
        row.insertCell(2).innerText = a.nome;
        row.insertCell(3).innerText = p.pontos;
        const btnCell = row.insertCell(4);
        if (a.concluido) {
          btnCell.innerHTML = "âœ… Feito";
        } else {

